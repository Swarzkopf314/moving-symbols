<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Moving Symbols: moving_symbols.moving_symbols.MovingSymbolsEnvironment Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Moving Symbols
   &#160;<span id="projectnumber">v1.0</span>
   </div>
   <div id="projectbrief">Like Moving MNIST, but way more flexible</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>moving_symbols</b></li><li class="navelem"><b>moving_symbols</b></li><li class="navelem"><a class="el" href="classmoving__symbols_1_1moving__symbols_1_1MovingSymbolsEnvironment.html">MovingSymbolsEnvironment</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classmoving__symbols_1_1moving__symbols_1_1MovingSymbolsEnvironment-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">moving_symbols.moving_symbols.MovingSymbolsEnvironment Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Generator that produces Moving Symbol video frames.  
 <a href="classmoving__symbols_1_1moving__symbols_1_1MovingSymbolsEnvironment.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a57119ac3148a116fac2206c500aff101"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoving__symbols_1_1moving__symbols_1_1MovingSymbolsEnvironment.html#a57119ac3148a116fac2206c500aff101">__init__</a> (self, params, seed, fidelity=10, debug_options=None, initial_subscribers=[])</td></tr>
<tr class="memdesc:a57119ac3148a116fac2206c500aff101"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a57119ac3148a116fac2206c500aff101">More...</a><br /></td></tr>
<tr class="separator:a57119ac3148a116fac2206c500aff101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa19eafdba1dcdf0b93413f7cb994211f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoving__symbols_1_1moving__symbols_1_1MovingSymbolsEnvironment.html#aa19eafdba1dcdf0b93413f7cb994211f">add_subscriber</a> (self, subscriber)</td></tr>
<tr class="memdesc:aa19eafdba1dcdf0b93413f7cb994211f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a subscriber of published messages.  <a href="#aa19eafdba1dcdf0b93413f7cb994211f">More...</a><br /></td></tr>
<tr class="separator:aa19eafdba1dcdf0b93413f7cb994211f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5f0aeeac5e28251f4825e17db48b346"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac5f0aeeac5e28251f4825e17db48b346"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>send</b> (self, _)</td></tr>
<tr class="separator:ac5f0aeeac5e28251f4825e17db48b346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d19013e4268b62ca0e5333134973cb7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d19013e4268b62ca0e5333134973cb7"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>throw</b> (self, type=None, value=None, traceback=None)</td></tr>
<tr class="separator:a2d19013e4268b62ca0e5333134973cb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae330ca4b2701648565772b2c39883ae1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae330ca4b2701648565772b2c39883ae1"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__iter__</b> (self)</td></tr>
<tr class="separator:ae330ca4b2701648565772b2c39883ae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37863ed0caf345d90f9098b774d6d4cd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a37863ed0caf345d90f9098b774d6d4cd"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>next</b> (self)</td></tr>
<tr class="separator:a37863ed0caf345d90f9098b774d6d4cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6ed44b00b74c1ee638318f31615047"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acd6ed44b00b74c1ee638318f31615047"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>close</b> (self)</td></tr>
<tr class="separator:acd6ed44b00b74c1ee638318f31615047"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a6ff1a10790883f86bf710e20650b4f18"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6ff1a10790883f86bf710e20650b4f18"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>params</b></td></tr>
<tr class="separator:a6ff1a10790883f86bf710e20650b4f18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbc6f17f8ae379265f588de5d142e540"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adbc6f17f8ae379265f588de5d142e540"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>fidelity</b></td></tr>
<tr class="separator:adbc6f17f8ae379265f588de5d142e540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa0119e593d8f773fd89d9277ba2f33d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa0119e593d8f773fd89d9277ba2f33d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>debug_options</b></td></tr>
<tr class="separator:aaa0119e593d8f773fd89d9277ba2f33d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf3981ad4eed4eb72b32b09dbb389bb2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abf3981ad4eed4eb72b32b09dbb389bb2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>video_size</b></td></tr>
<tr class="separator:abf3981ad4eed4eb72b32b09dbb389bb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeddc8f8232e767707bef3caf9e40722"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeeddc8f8232e767707bef3caf9e40722"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>cur_rng_seed</b></td></tr>
<tr class="separator:aeeddc8f8232e767707bef3caf9e40722"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80486b4d5a3d432e6f4c2440c1e001a3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a80486b4d5a3d432e6f4c2440c1e001a3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>symbols</b></td></tr>
<tr class="separator:a80486b4d5a3d432e6f4c2440c1e001a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:af2326d0314acbe7e0d98437ced64fb98"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><b>DEFAULT_PARAMS</b></td></tr>
<tr class="separator:af2326d0314acbe7e0d98437ced64fb98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a521f8c7949d1cfc75b3981b0a23f74b9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><b>DEFAULT_DEBUG_OPTIONS</b></td></tr>
<tr class="separator:a521f8c7949d1cfc75b3981b0a23f74b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Generator that produces Moving Symbol video frames. </p>
<p>This class manages a physical environment in which symbols move around. It also handles rendering of the current physical state. Renders are returned as PIL images, either in RGB or L (8-bit grayscale) mode. It implements the native Python generator interface.</p>
<p>The physical state is initialized based on the parameters given to the constructor (default values are supplied by DEFAULT_PARAMS). Below are the key-value pairs that can be specified:</p>
<ul>
<li><b>data_dir, str</b>: Path to the dataset directory. The dataset directory should contain one folder for each split, e.g. "training" and "testing", and each split directory should contain folders for each class (e.g. 0, ..., 9 for MNIST digits).</li>
<li><b>split, str</b>: Name of the data split to sample from</li>
<li><b>num_symbols, int</b>: How many symbols should appear in the video</li>
<li><b>video_size, (int, int)</b>: The resolution of the video as (width, height)</li>
<li><b>color_output, bool</b>: Whether to produce "RGB" color images or "L" grayscale images</li>
<li><b>symbol_labels, Sequence</b>: The labels for the symbol classes. These must be strings or ints (or any object with <b>str</b> implemented) that match the names of the folders in each split directory</li>
<li><b>scale_limits, (float, float)</b>: The minimum and maximum scale of an object relative to its original size</li>
<li><b>scale_period_limits, (float, float) or list of (float, float)</b>: The minimum and maximum duration of a full scale cycle in number of frames</li>
<li><b>rotation_speed_limits, (float, float) or list of (float, float)</b>: The minimum and maximum angular speed, in radians per frame</li>
<li><b>position_speed_limits, (float, float) or list of (float, float)</b>: The minimum and maximum translational speed, in pixels per frame</li>
<li><b>interacting_symbols, bool</b>: Whether symbols will bounce off each other</li>
<li><b>scale_function_type, str</b>: The class of function used to define the scale of each symbol at each time step. Supported options are:<ul>
<li>"sine": Scale is determined by a sine wave</li>
<li>"triangle": Scale is determined by a triangle wave (i.e. scaling speed is constant, but switches directions if the digit gets too big or small)</li>
<li>"constant": The symbols do not change scale. Initial scale is randomly sampled from within scale_limits</li>
</ul>
</li>
<li><b>rotate_at_start, bool</b>: Whether symbols can start at a rotated angle</li>
<li><b>rescale_at_start, bool</b>: Whether symbols can start at any scale in the specified range. If not. the scale of all symbols is initialized to the middle of the allowed scale range.</li>
<li><b>lateral_motion_at_start, bool</b>: Whether symbols can only translate left/right/up/down to start. If this is True, symbols can only move non-laterally if they bounce off of other symbols. </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a57119ac3148a116fac2206c500aff101"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def moving_symbols.moving_symbols.MovingSymbolsEnvironment.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>seed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fidelity</em> = <code>10</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>debug_options</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>initial_subscribers</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>dict of parameters that define how symbols behave and are rendered. See the detailed description for this class for supported parameters. </td></tr>
    <tr><td class="paramname">seed</td><td>Seed for the RNG (int) </td></tr>
    <tr><td class="paramname">fidelity</td><td>How many iterations to run in the physics simulator per step (int) </td></tr>
    <tr><td class="paramname">debug_options</td><td>dict with options for visual debugging, or None if visual debugging should be turned off. The following key-value pairs are supported:<ul>
<li>show_pymunk_debug, bool: Whether to use PyMunk's default drawing function</li>
<li>show_bounding_poly, bool: Whether to render PyMunk surface outlines</li>
<li>show_frame_number, bool: Whether to show the index of the frame</li>
<li>frame_number_font_size, int: Size of the frame index font</li>
<li>frame_rate, int: Frame rate of the debug visualization </li>
</ul>
</td></tr>
    <tr><td class="paramname">initial_subscribers</td><td>list of subscribers to receive constructor messages. Each object in the list must have a "process_message" method. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa19eafdba1dcdf0b93413f7cb994211f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def moving_symbols.moving_symbols.MovingSymbolsEnvironment.add_subscriber </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>subscriber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a subscriber of published messages. </p>
<p>The subscriber must have a callable "process_message" method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscriber</td><td>An object with a callable "process_message" method </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a521f8c7949d1cfc75b3981b0a23f74b9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">moving_symbols.moving_symbols.MovingSymbolsEnvironment.DEFAULT_DEBUG_OPTIONS</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;= dict(</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        frame_number_font_size=30,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        show_pymunk_debug=<span class="keyword">False</span>,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        show_bounding_poly=<span class="keyword">False</span>,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        show_frame_number=<span class="keyword">False</span>,</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        frame_rate=sys.maxint</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    )</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af2326d0314acbe7e0d98437ced64fb98"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">moving_symbols.moving_symbols.MovingSymbolsEnvironment.DEFAULT_PARAMS</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;= dict(</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        data_dir=<span class="stringliteral">&#39;../data/mnist&#39;</span>,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        split=<span class="stringliteral">&#39;training&#39;</span>,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        num_symbols=1,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        video_size=(64, 64),</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        color_output=<span class="keyword">True</span>,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        symbol_labels=[0],</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        scale_limits=(1.0, 1.0),</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        scale_period_limits=(1, 1),</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        rotation_speed_limits=(0, 0),</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        position_speed_limits=(0, 0),</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        interacting_symbols=<span class="keyword">False</span>,</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        scale_function_type=<span class="stringliteral">&#39;constant&#39;</span>,</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        rotate_at_start=<span class="keyword">False</span>,</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        rescale_at_start=<span class="keyword">True</span>,</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        lateral_motion_at_start=<span class="keyword">False</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    )</div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
